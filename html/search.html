<!DOCTYPE html>
<html lang="zh-cmn-Hans">
    
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="../css/default.css" type="text/css" />
        <link rel="stylesheet" href="../css/search.css" type="text/css" />
        <script type="text/javascript" src="../js/search.js"></script>
        <script src="../js/vue.min.js"></script>
        <title>E-Book 易布克在线书店</title></head>
    
    <body>
        <div id="container">
            <header>
                <h1>E-Book Online Store</h1></header>
            <nav>
                <ul>
                    <li>
                        <a href="../index.html">主页</a></li>
                    <li>
                        <a href="search.html">书籍检索</a></li>
                    <li>
                        <a href="control_panel.html">订单管理</a></li>
                    <li>
                        <a href="shopping_cart.html">购物车</a></li>
                    <li>
                        <a href="about.html">关于</a></li>
                </ul>
            </nav>
            <main>
                <div id="searchBox">
                    <div class="inputField">
                        <input type="text" id="keyword" class="inputBox"/>
                        <button class="searchButton" @click="getKeyword()">搜索</button>
                        <div class="otherCondition">
                            <label>排序方式</label>&nbsp;
                            <input type="radio" name="sortType" id="A-Z" value="A-Z" checked="checked" @click="sortBy('name')" />
                            <label>字母</label>&nbsp;
                            <input type="radio" name="sortType" id="Date" value="Date" @click="sortBy('date')" />
                            <label>出版时间</label>&nbsp;
                            <input type="radio" name="sortType" id="Price" value="Price" @click="sortBy('price')" />
                            <label>价格</label>&nbsp; &nbsp;&nbsp;
                            <label class="otherCondition">筛选条件</label>&nbsp;
                            <input type="checkbox" name="Chinese" id="Chinese" value="yes" checked="checked" @click="exclude('CH')" />
                            <label>中文</label>&nbsp;
                            <input type="checkbox" name="OtherLang" id="OtherLang" value="yes" checked="checked" @click="exclude('EN')" />
                            <label>进口</label></div>
                    </div>
                    <table class="bookShelf">
                        <tbody>
                            <tr>
                                <th class="bookName">书籍名称</th>
                                <th class="otherProps">价格</th>
                                <th>出版日期</th>
                                <th>语种</th></tr>
                            <tr v-for="item in filteredlist">
                                <td class="bookName" onmouseout="hideCover(this);" onmousemove="showCover(event,this);">{{item.name}}</td>
                                <td class="otherProps">&yen;{{item.price}}</td>
                                <td class="otherProps">{{item.date}}</td>
                                <td class="otherProps">{{item.lang}}</td></tr>
                        </tbody>
                    </table>
                </div>
            </main>
            <footer>
                <small>
                    <i>Copyright &copy; 2019 赵悦棋 517021910158</i>
                </small>
            </footer>
            <div id="preview" class="floatcover" style="display: none; position: absolute; z-index: 100;"></div>
        </div>
        <script type="text/javascript">var BookShelf = new Vue({
                el: '#searchBox',
                data: {
                    booksList: [{
                        name: "自控力",
                        price: 18.99,
                        date: 2016,
                        lang: "中文"
                    },
                    {
                        name: "中国通史",
                        price: 30.20,
                        date: 2016,
                        lang: "中文"
                    },
                    {
                        name: "云球",
                        price: 65.00,
                        date: 2019,
                        lang: "中文"
                    },
                    {
                        name: "月亮与六便士",
                        price: 25.00,
                        date: 2017,
                        lang: "中文"
                    },
                    {
                        name: "一只特立独行的猪",
                        price: 26.25,
                        date: 2017,
                        lang: "中文"
                    },
                    {
                        name: "乌合之众：大众心理研究",
                        price: 13.00,
                        date: 2010,
                        lang: "中文"
                    },
                    {
                        name: "我余生的第一天",
                        price: 29.40,
                        date: 2019,
                        lang: "中文"
                    },
                    {
                        name: "世界简史",
                        price: 33.10,
                        date: 2018,
                        lang: "中文"
                    },
                    {
                        name: "时间管理：如何充分利用你的24小时",
                        price: 18.20,
                        date: 2012,
                        lang: "中文"
                    },
                    {
                        name: "时擦",
                        price: 22.09,
                        date: 2018,
                        lang: "中文"
                    },
                    {
                        name: "人性的弱点全集",
                        price: 19.40,
                        date: 2008,
                        lang: "中文"
                    },
                    {
                        name: "人间失格",
                        price: 22.10,
                        date: 2013,
                        lang: "中文"
                    },
                    {
                        name: "人际的魅力—如何正确处理人际关系",
                        price: 19.90,
                        date: 2013,
                        lang: "中文"
                    },
                    {
                        name: "皮囊",
                        price: 27.40,
                        date: 2014,
                        lang: "中文"
                    },
                    {
                        name: "你不是记性差，只是没找对方法",
                        price: 31.40,
                        date: 2019,
                        lang: "中文"
                    },
                    {
                        name: "明朝那些事儿",
                        price: 29.99,
                        date: 2017,
                        lang: "中文"
                    },
                    {
                        name: "梦的解析",
                        price: 45.20,
                        date: 2016,
                        lang: "中文"
                    },
                    {
                        name: "流浪地球",
                        price: 29.20,
                        date: 2016,
                        lang: "中文"
                    },
                    {
                        name: "了不起的盖茨比",
                        price: 25.20,
                        date: 2018,
                        lang: "中文"
                    },
                    {
                        name: "厚黑学",
                        price: 31.40,
                        date: 2015,
                        lang: "中文"
                    },
                    {
                        name: "红楼梦",
                        price: 23.33,
                        date: 2005,
                        lang: "中文"
                    },
                    {
                        name: "都挺好",
                        price: 35.60,
                        date: 2018,
                        lang: "中文"
                    },
                    {
                        name: "东宫",
                        price: 13.40,
                        date: 2013,
                        lang: "中文"
                    },
                    {
                        name: "沉默的大多数",
                        price: 25.50,
                        date: 2016,
                        lang: "中文"
                    },
                    {
                        name: "边城",
                        price: 23.50,
                        date: 2013,
                        lang: "中文"
                    },
                    {
                        name: "半小时漫画中国史",
                        price: 13.00,
                        date: 2015,
                        lang: "中文"
                    },
                    {
                        name: "The Time Machine",
                        price: 78.40,
                        date: 2011,
                        lang: "英文"
                    },
                    {
                        name: "Steve Jobs",
                        price: 114.48,
                        date: 2011,
                        lang: "英文"
                    },
                    {
                        name: "Lonely Planet Travel With Children Sampler",
                        price: 10.40,
                        date: 2015,
                        lang: "英文"
                    },
                    {
                        name: "Harry Potter- The Complete Collection",
                        price: 150.00,
                        date: 2016,
                        lang: "英文"
                    },
                    {
                        name: "Harry Potter and the Prisoner of Azkaban",
                        price: 133.90,
                        date: 2016,
                        lang: "英文"
                    },
                    {
                        name: "Harry Potter and the Philosopher's Stone",
                        price: 94.30,
                        date: 2016,
                        lang: "英文"
                    },
                    {
                        name: "Harry Potter and the Chamber of Secrets",
                        price: 168.00,
                        date: 2016,
                        lang: "英文"
                    },
                    {
                        name: "Elon Musk",
                        price: 118.00,
                        date: 2015,
                        lang: "英文"
                    },
                    {
                        name: "Becoming",
                        price: 155.70,
                        date: 2018,
                        lang: "英文"
                    },
                    {
                        name: "Bad Blood- Secrets and Lies in a Silicon Valley Startup ",
                        price: 165.00,
                        date: 2018,
                        lang: "英文"
                    }],
                    inputVal: '',
                    sortedBy: 'name',
                    reverseOrder: false,
                    encludeCH: true,
                    encludeEN: true
                },
                methods: {
                    exclude(selectedLang) {
                        if (selectedLang == "CH") {
                            this.encludeCH = !this.encludeCH;
                        }
                        if (selectedLang == "EN") {
                            this.encludeEN = !this.encludeEN;
                        }
                    },
                    sortBy(selectedOrder) {
                        this.sortedBy = selectedOrder;
                        this.reverseOrder = !this.reverseOrder;
                    },
					getKeyword() {
						this.inputVal = document.getElementById("keyword").value;
					}
                },
                computed: {
                    filteredlist: function() {
                        var _this = this;
                        var optList = [];
                        for (var i = 0; i < this.booksList.length; i++) {
                            if (this.booksList[i].lang == "中文" && _this.encludeCH) {
                                if (this.booksList[i].name.search(this.inputVal) != -1) {
                                    optList.push(this.booksList[i]);
                                }
                            }
                            if (this.booksList[i].lang == "英文" && _this.encludeEN) {
                                if (this.booksList[i].name.search(this.inputVal) != -1) {
                                    optList.push(this.booksList[i]);
                                }
                            }
                        }
                        if (this.sortedBy != '') {
                            if (this.sortedBy != 'name') {
                                optList.sort(function(a, b) {
                                    if (_this.reverseOrder) {
                                        return b[_this.sortedBy] - a[_this.sortedBy];
                                    } else {
                                        return a[_this.sortedBy] - b[_this.sortedBy];
                                    }
                                });
                            }
                            if (this.sortedBy == 'name') {
                                optList.sort(function(a, b) {
                                    if (!_this.reverseOrder) {
                                        return a[_this.sortedBy].localeCompare(b[_this.sortedBy]);
                                    } else {
                                        return b[_this.sortedBy].localeCompare(a[_this.sortedBy]);
                                    }
                                })
                            }
                        }
                        return optList;
                    }
                }
            });</script>
    </body>

</html>